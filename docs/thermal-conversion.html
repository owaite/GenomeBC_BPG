<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Thermal Conversion | Guidelines and Procedures for Drone Based Phenotyping in Forest Research Trials</title>
  <meta name="description" content="Chapter 7 Thermal Conversion | Guidelines and Procedures for Drone Based Phenotyping in Forest Research Trials" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Thermal Conversion | Guidelines and Procedures for Drone Based Phenotyping in Forest Research Trials" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Thermal Conversion | Guidelines and Procedures for Drone Based Phenotyping in Forest Research Trials" />
  
  
  

<meta name="author" content="Jake King*, Olivia Waite, Miriam Isaac-Renton, Nicholas C. Coops, Samuel Grubinger, Liam Irwin, Lise Van Der Merwe, Jon Degner, Alex Liu" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="micasense-irradiance-correction.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Drone Based Phenotyping for Research Trials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Guidelines and Procedures for Drone Based Phenotyping in Forest Research Trials</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#github-link"><i class="fa fa-check"></i>GitHub link</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-cite-this-report"><i class="fa fa-check"></i>How to cite this report:</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="range-of-sites-assessed.html"><a href="range-of-sites-assessed.html"><i class="fa fa-check"></i><b>1</b> Range of Sites Assessed</a>
<ul>
<li class="chapter" data-level="1.1" data-path="range-of-sites-assessed.html"><a href="range-of-sites-assessed.html#jordan-river"><i class="fa fa-check"></i><b>1.1</b> Jordan River</a></li>
<li class="chapter" data-level="1.2" data-path="range-of-sites-assessed.html"><a href="range-of-sites-assessed.html#powell-river"><i class="fa fa-check"></i><b>1.2</b> Powell River</a></li>
<li class="chapter" data-level="1.3" data-path="range-of-sites-assessed.html"><a href="range-of-sites-assessed.html#sites"><i class="fa fa-check"></i><b>1.3</b> 2024 Sites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preflight-planning.html"><a href="preflight-planning.html"><i class="fa fa-check"></i><b>2</b> Preflight Planning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="preflight-planning.html"><a href="preflight-planning.html#achieving-positional-accuracy-on-multi-temporal-and-multi-sensor-data-collections"><i class="fa fa-check"></i><b>2.1</b> Achieving positional accuracy on multi-temporal and multi-sensor data collections</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="preflight-planning.html"><a href="preflight-planning.html#kinematic-processing-rtkppk"><i class="fa fa-check"></i><b>2.1.1</b> Kinematic processing: RTK/PPK</a></li>
<li class="chapter" data-level="2.1.2" data-path="preflight-planning.html"><a href="preflight-planning.html#ground-control-points-gcp"><i class="fa fa-check"></i><b>2.1.2</b> Ground Control Points (GCP)</a></li>
<li class="chapter" data-level="2.1.3" data-path="preflight-planning.html"><a href="preflight-planning.html#absolute-and-relative-reference-with-precise-point-positioning-ppp"><i class="fa fa-check"></i><b>2.1.3</b> Absolute and Relative Reference with Precise Point Positioning (PPP)</a></li>
<li class="chapter" data-level="2.1.4" data-path="preflight-planning.html"><a href="preflight-planning.html#terrain-following-on-sites-with-elevation-change"><i class="fa fa-check"></i><b>2.1.4</b> Terrain Following on Sites with Elevation Change</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="preflight-planning.html"><a href="preflight-planning.html#site-selection-considerations"><i class="fa fa-check"></i><b>2.2</b> Site Selection Considerations</a></li>
<li class="chapter" data-level="2.3" data-path="preflight-planning.html"><a href="preflight-planning.html#drone-and-sensors-what-will-i-need-to-purchase-and-how-much-will-it-cost"><i class="fa fa-check"></i><b>2.3</b> Drone and Sensors: What will I need to purchase and how much will it cost?</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="preflight-planning.html"><a href="preflight-planning.html#hardware-costs"><i class="fa fa-check"></i><b>2.3.1</b> Hardware Costs</a></li>
<li class="chapter" data-level="2.3.2" data-path="preflight-planning.html"><a href="preflight-planning.html#drone-training-in-canada"><i class="fa fa-check"></i><b>2.3.2</b> Drone Training in Canada</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="preflight-planning.html"><a href="preflight-planning.html#section"><i class="fa fa-check"></i><b>2.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html"><i class="fa fa-check"></i><b>3</b> Data Collection and Flights</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#hardware---dji-matrice-3000-rtk-m300"><i class="fa fa-check"></i><b>3.1</b> Hardware - DJI Matrice 3000 RTK (M300)</a></li>
<li class="chapter" data-level="3.2" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#workflow-site-reconnaissance"><i class="fa fa-check"></i><b>3.2</b> Workflow: Site Reconnaissance</a></li>
<li class="chapter" data-level="3.3" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#data-collection-flight-planning"><i class="fa fa-check"></i><b>3.3</b> Data Collection: Flight Planning</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#flight-planning-theory"><i class="fa fa-check"></i><b>3.3.1</b> Flight planning theory</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#flight-planning-with-dji-pilot"><i class="fa fa-check"></i><b>3.3.2</b> Flight planning with DJI Pilot</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#data-collection-sensors-parameters-and-ideal-conditions"><i class="fa fa-check"></i><b>3.4</b> Data Collection: Sensors, Parameters, and Ideal Conditions</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#micasense-10-band-spectral-sensor-for-vegetative-indices"><i class="fa fa-check"></i><b>3.4.1</b> MicaSense: 10-Band Spectral Sensor for Vegetative Indices</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-collection-and-flights.html"><a href="data-collection-and-flights.html#zenmuse-p1-high-quality-natural-colour-rgb-imagery"><i class="fa fa-check"></i><b>3.4.2</b> Zenmuse P1: High-Quality Natural-Colour (RGB) Imagery</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="photogrametric-processing.html"><a href="photogrametric-processing.html"><i class="fa fa-check"></i><b>4</b> Photogrametric Processing</a>
<ul>
<li class="chapter" data-level="4.1" data-path="photogrametric-processing.html"><a href="photogrametric-processing.html#processing-orthomosaics"><i class="fa fa-check"></i><b>4.1</b> Processing Orthomosaics</a></li>
<li class="chapter" data-level="4.2" data-path="photogrametric-processing.html"><a href="photogrametric-processing.html#shadow-masks"><i class="fa fa-check"></i><b>4.2</b> Shadow Masks</a></li>
<li class="chapter" data-level="4.3" data-path="photogrametric-processing.html"><a href="photogrametric-processing.html#crown-level-vegetation-indicies"><i class="fa fa-check"></i><b>4.3</b> Crown-level Vegetation Indicies</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="photogrametric-processing.html"><a href="photogrametric-processing.html#vi-workflow"><i class="fa fa-check"></i><b>4.3.1</b> VI Workflow</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html"><i class="fa fa-check"></i><b>5</b> LiDAR Processing Workflow</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#dji-terra"><i class="fa fa-check"></i><b>5.1</b> DJI Terra</a></li>
<li class="chapter" data-level="5.2" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#register-the-lidar-to-the-dap-point-cloud"><i class="fa fa-check"></i><b>5.2</b> Register the LiDAR to the DAP point cloud</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#prepare-lidar-for-registration"><i class="fa fa-check"></i><b>5.2.1</b> Prepare LiDAR for registration</a></li>
<li class="chapter" data-level="5.2.2" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#register-lidar-to-dap-cloud-in-cloudcompare"><i class="fa fa-check"></i><b>5.2.2</b> Register LiDAR to DAP cloud in CloudCompare</a></li>
<li class="chapter" data-level="5.2.3" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#rescale-and-tile-the-registered-lidar"><i class="fa fa-check"></i><b>5.2.3</b> Rescale and tile the registered LiDAR:</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#normalization-and-individual-tree-point-clouds"><i class="fa fa-check"></i><b>5.3</b> Normalization and individual tree point clouds</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#creating-a-dtm-from-the-registered-lidar-tiles"><i class="fa fa-check"></i><b>5.3.1</b> Creating a DTM from the registered LiDAR tiles</a></li>
<li class="chapter" data-level="5.3.2" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#normalizing-the-tiles-using-the-dtm"><i class="fa fa-check"></i><b>5.3.2</b> Normalizing the tiles using the DTM</a></li>
<li class="chapter" data-level="5.3.3" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#creating-a-4cm-chm-from-the-max-z-values"><i class="fa fa-check"></i><b>5.3.3</b> Creating a 4cm CHM from the max Z values</a></li>
<li class="chapter" data-level="5.3.4" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#segmenting-tiles"><i class="fa fa-check"></i><b>5.3.4</b> Segmenting tiles</a></li>
<li class="chapter" data-level="5.3.5" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#merging-segmented-tiles-to-create-one-large-point-cloud-containing-the-top-defined-height-of-each-tree"><i class="fa fa-check"></i><b>5.3.5</b> Merging segmented tiles to create one large point cloud containing the top defined height % of each tree</a></li>
<li class="chapter" data-level="5.3.6" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#clipping-the-point-cloud-into-individual-point-clouds-per-tree"><i class="fa fa-check"></i><b>5.3.6</b> Clipping the point cloud into individual point clouds per tree</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="lidar-processing-workflow.html"><a href="lidar-processing-workflow.html#individual-tree-metrics"><i class="fa fa-check"></i><b>5.4</b> Individual Tree Metrics</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html"><i class="fa fa-check"></i><b>6</b> MicaSense Irradiance Correction</a>
<ul>
<li class="chapter" data-level="6.1" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#background"><i class="fa fa-check"></i><b>6.1</b> Background</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#deriving-horizontal-irradiance"><i class="fa fa-check"></i><b>6.1.1</b> Deriving Horizontal Irradiance</a></li>
<li class="chapter" data-level="6.1.2" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#calculating-reflectance"><i class="fa fa-check"></i><b>6.1.2</b> Calculating Reflectance</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#the-problem"><i class="fa fa-check"></i><b>6.2</b> The Problem</a></li>
<li class="chapter" data-level="6.3" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#is-correction-needed"><i class="fa fa-check"></i><b>6.3</b> Is Correction Needed?</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#do-the-sun-sensor-angles-make-sense"><i class="fa fa-check"></i><b>6.3.1</b> Do the sun sensor angles make sense?</a></li>
<li class="chapter" data-level="6.3.2" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#does-the-relationship-between-direct-and-horizontal-irradiance-make-sense"><i class="fa fa-check"></i><b>6.3.2</b> Does the relationship between direct and horizontal irradiance make sense?</a></li>
<li class="chapter" data-level="6.3.3" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#does-the-scattered-direct-ratio-make-sense-for-the-lighting-conditions-of-that-day"><i class="fa fa-check"></i><b>6.3.3</b> Does the scattered: direct ratio make sense for the lighting conditions of that day?</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#correcting-irradiance-values-for-micasense-cameras"><i class="fa fa-check"></i><b>6.4</b> Correcting Irradiance Values for Micasense Cameras</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#reading-exif-data"><i class="fa fa-check"></i><b>6.4.1</b> Reading Exif Data</a></li>
<li class="chapter" data-level="6.4.2" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#calculating-solar-zenith-anlge"><i class="fa fa-check"></i><b>6.4.2</b> Calculating Solar Zenith Anlge</a></li>
<li class="chapter" data-level="6.4.3" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#caluclating-sun-sensor-angles"><i class="fa fa-check"></i><b>6.4.3</b> Caluclating Sun-Sensor Angles</a></li>
<li class="chapter" data-level="6.4.4" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#scattereddirect-ratio-estimate"><i class="fa fa-check"></i><b>6.4.4</b> Scattered:Direct Ratio Estimate</a></li>
<li class="chapter" data-level="6.4.5" data-path="micasense-irradiance-correction.html"><a href="micasense-irradiance-correction.html#computing-horizontal-corrected-irradiance"><i class="fa fa-check"></i><b>6.4.5</b> Computing Horizontal (Corrected) Irradiance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="thermal-conversion.html"><a href="thermal-conversion.html"><i class="fa fa-check"></i><b>7</b> Thermal Conversion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="thermal-conversion.html"><a href="thermal-conversion.html#folder-set-up"><i class="fa fa-check"></i><b>7.1</b> Folder Set-Up</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Guidelines and Procedures for Drone Based Phenotyping in Forest Research Trials</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="thermal-conversion" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Thermal Conversion<a href="thermal-conversion.html#thermal-conversion" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This method converts raw imagery from the Zenmuse H20T to temperature rasters. We wrote this method to bypass DJI’s thermal analysis tool app since we have thousands of images and the app would often crash when a few were uploaded. This script uses the DJI thermal analysis tool’s software developer kit (SDK)</p>
<p>Prior to running this code you must:
- Download the .bat file for step 2 from the GitHub</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="thermal-conversion.html#cb54-1" tabindex="-1"></a><span class="fu">library</span>(exiftoolr)</span>
<span id="cb54-2"><a href="thermal-conversion.html#cb54-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb54-3"><a href="thermal-conversion.html#cb54-3" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb54-4"><a href="thermal-conversion.html#cb54-4" tabindex="-1"></a><span class="fu">library</span>(OpenImageR)</span>
<span id="cb54-5"><a href="thermal-conversion.html#cb54-5" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb54-6"><a href="thermal-conversion.html#cb54-6" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb54-7"><a href="thermal-conversion.html#cb54-7" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb54-8"><a href="thermal-conversion.html#cb54-8" tabindex="-1"></a></span>
<span id="cb54-9"><a href="thermal-conversion.html#cb54-9" tabindex="-1"></a></span>
<span id="cb54-10"><a href="thermal-conversion.html#cb54-10" tabindex="-1"></a><span class="co"># Read in CSV of weather data (ensure adjustments for daylight savings have been made if necessary) </span></span>
<span id="cb54-11"><a href="thermal-conversion.html#cb54-11" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;D:</span><span class="sc">\\</span><span class="st">Fdc_PR_Canoe</span><span class="sc">\\</span><span class="st">Site_Info</span><span class="sc">\\</span><span class="st">Powell_River_Canoe2_All_Data_2023_02_07_PST_1_DaylightSavings_mar16_nov6_2022.csv&quot;</span>)</span>
<span id="cb54-12"><a href="thermal-conversion.html#cb54-12" tabindex="-1"></a>df<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df<span class="sc">$</span>Date, <span class="st">&#39;%m/%d/%y&#39;</span>) <span class="co">#comes out as year-0m-0d</span></span>
<span id="cb54-13"><a href="thermal-conversion.html#cb54-13" tabindex="-1"></a></span>
<span id="cb54-14"><a href="thermal-conversion.html#cb54-14" tabindex="-1"></a>dates_DST <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">unique</span>(df<span class="sc">$</span>Date))</span>
<span id="cb54-15"><a href="thermal-conversion.html#cb54-15" tabindex="-1"></a>dates_DST</span>
<span id="cb54-16"><a href="thermal-conversion.html#cb54-16" tabindex="-1"></a>dates_list <span class="ot">&lt;-</span> <span class="fu">as.list</span>(dates_DST)</span>
<span id="cb54-17"><a href="thermal-conversion.html#cb54-17" tabindex="-1"></a>dates_list</span>
<span id="cb54-18"><a href="thermal-conversion.html#cb54-18" tabindex="-1"></a></span>
<span id="cb54-19"><a href="thermal-conversion.html#cb54-19" tabindex="-1"></a>Canoe_df <span class="ot">&lt;-</span> df</span></code></pre></div>
<div id="folder-set-up" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Folder Set-Up<a href="thermal-conversion.html#folder-set-up" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This step goes over how we organize our imagery for the following thermal conversion.</p>
<p>Here we:</p>
<ul>
<li><p>create a folder named:</p>
<ul>
<li><p>“Merged_T” within the original “H20T” folder, this is the location the raw thermal images will be copied. This allow us to (a) keep a backup of the original data and (b) easily iterate over the images to convert them in later steps</p></li>
<li><p>“Temperature_rasters” within the Merged_T folder that will hold converted imagery</p></li>
<li><p>“Temperature_rasters_EXIF” within the Merged_T folder that will hold converted imagery that has original imagery exif data written to it</p></li>
</ul></li>
<li><p>locate all folders within the defined directory that have DJI and H20T in the name</p></li>
<li><p>Iterate over the folders found in the above step and:</p>
<ul>
<li>find files that end in _T.JPG (the raw thermal images)</li>
<li>copy over the raw thermal images to the merged folder</li>
</ul></li>
</ul>
<p><strong>Note:</strong> Our folder structure was:</p>
<ul>
<li>paste0(“I:\PARSER_Ext\”,site,“\Flights\”, data_date, “\1_Data\H20T”), where “site” is a string of the site name that we defined prior to the for loop and data_date is a string representing the flight date that is defined in the for loop. This was done so we could easily iterate over sites and dates. Feel free to change this to match your folder structure.</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="thermal-conversion.html#cb55-1" tabindex="-1"></a><span class="co"># Setting the site and flight date to convert thermal imagery</span></span>
<span id="cb55-2"><a href="thermal-conversion.html#cb55-2" tabindex="-1"></a>flight_dates <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">&quot;2023_05_10&quot;</span>) <span class="co"># Here only one date is shown however this can be a list of however many dates you would like to iterate over</span></span>
<span id="cb55-3"><a href="thermal-conversion.html#cb55-3" tabindex="-1"></a>site <span class="ot">&lt;-</span> <span class="st">&quot;Fdc_PR_Canoe&quot;</span> </span>
<span id="cb55-4"><a href="thermal-conversion.html#cb55-4" tabindex="-1"></a>merged <span class="ot">&lt;-</span> <span class="st">&quot;Merged_T&quot;</span> <span class="co">#name of the &#39;merged&#39; folder that will contain all the h20T images from the multiple folders ouput by the H20T</span></span>
<span id="cb55-5"><a href="thermal-conversion.html#cb55-5" tabindex="-1"></a></span>
<span id="cb55-6"><a href="thermal-conversion.html#cb55-6" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(flight_dates)){</span>
<span id="cb55-7"><a href="thermal-conversion.html#cb55-7" tabindex="-1"></a>  data_date <span class="ot">&lt;-</span> flight_dates[i]</span>
<span id="cb55-8"><a href="thermal-conversion.html#cb55-8" tabindex="-1"></a>  <span class="fu">print</span>(data_date)</span>
<span id="cb55-9"><a href="thermal-conversion.html#cb55-9" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;I:</span><span class="sc">\\</span><span class="st">PARSER_Ext</span><span class="sc">\\</span><span class="st">&quot;</span>,site,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">Flights</span><span class="sc">\\</span><span class="st">&quot;</span>, data_date, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1_Data</span><span class="sc">\\</span><span class="st">H20T&quot;</span>)</span>
<span id="cb55-10"><a href="thermal-conversion.html#cb55-10" tabindex="-1"></a>  <span class="co">#create folders</span></span>
<span id="cb55-11"><a href="thermal-conversion.html#cb55-11" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged))) {</span>
<span id="cb55-12"><a href="thermal-conversion.html#cb55-12" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged),<span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-13"><a href="thermal-conversion.html#cb55-13" tabindex="-1"></a>  }</span>
<span id="cb55-14"><a href="thermal-conversion.html#cb55-14" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">Temperature_rasters&quot;</span>))) {</span>
<span id="cb55-15"><a href="thermal-conversion.html#cb55-15" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">Temperature_rasters&quot;</span>),<span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-16"><a href="thermal-conversion.html#cb55-16" tabindex="-1"></a>  }</span>
<span id="cb55-17"><a href="thermal-conversion.html#cb55-17" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">Temperature_rasters_EXIF&quot;</span>))) {</span>
<span id="cb55-18"><a href="thermal-conversion.html#cb55-18" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">Temperature_rasters_EXIF&quot;</span>),<span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-19"><a href="thermal-conversion.html#cb55-19" tabindex="-1"></a>  }</span>
<span id="cb55-20"><a href="thermal-conversion.html#cb55-20" tabindex="-1"></a>  </span>
<span id="cb55-21"><a href="thermal-conversion.html#cb55-21" tabindex="-1"></a>  <span class="co">#getting folders in the H20T folder that have DJI and end in -H20T, may need to check that all folders are named this way</span></span>
<span id="cb55-22"><a href="thermal-conversion.html#cb55-22" tabindex="-1"></a>  list_dir <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir, <span class="at">full.names =</span> <span class="cn">TRUE</span>,<span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">&quot;DJI.+-H20T&quot;</span>))</span>
<span id="cb55-23"><a href="thermal-conversion.html#cb55-23" tabindex="-1"></a>  <span class="fu">print</span>(list_dir)</span>
<span id="cb55-24"><a href="thermal-conversion.html#cb55-24" tabindex="-1"></a>  </span>
<span id="cb55-25"><a href="thermal-conversion.html#cb55-25" tabindex="-1"></a>  <span class="cf">for</span> (d <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_dir)){</span>
<span id="cb55-26"><a href="thermal-conversion.html#cb55-26" tabindex="-1"></a>    folder_dir <span class="ot">&lt;-</span> list_dir[d] <span class="co">#calling each directly separately</span></span>
<span id="cb55-27"><a href="thermal-conversion.html#cb55-27" tabindex="-1"></a>    T_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(folder_dir, <span class="at">pattern =</span> <span class="st">&quot;_T</span><span class="sc">\\</span><span class="st">.JPG$&quot;</span>) <span class="co">#getting all JPEGs ending in _T </span></span>
<span id="cb55-28"><a href="thermal-conversion.html#cb55-28" tabindex="-1"></a>    <span class="fu">file.copy</span>(<span class="at">from =</span> <span class="fu">paste0</span>(folder_dir,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, T_files),</span>
<span id="cb55-29"><a href="thermal-conversion.html#cb55-29" tabindex="-1"></a>              <span class="at">to =</span> <span class="fu">paste0</span>(dir,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, T_files), <span class="at">overwrite =</span> <span class="cn">FALSE</span>) <span class="co">#copying h20T images ending in _T (aka unprocessed thermal images) into the thermal only folder for ease in DJI SDK step</span></span>
<span id="cb55-30"><a href="thermal-conversion.html#cb55-30" tabindex="-1"></a>  }</span>
<span id="cb55-31"><a href="thermal-conversion.html#cb55-31" tabindex="-1"></a>}</span></code></pre></div>
<p>#STEP 1: Weather Data: Humidity, Ambient Temp</p>
<p>#STEP 2: DJI SDK in Visual Studio : convert to temp in C :</p>
<p>#STEP 3: Read binary and convert to a raster: <a href="https://community.rstudio.com/t/solution-to-reading-raw-images-into-r/45435" class="uri">https://community.rstudio.com/t/solution-to-reading-raw-images-into-r/45435</a></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="thermal-conversion.html#cb56-1" tabindex="-1"></a>therm_dates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2022_10_05&quot;</span>)</span>
<span id="cb56-2"><a href="thermal-conversion.html#cb56-2" tabindex="-1"></a></span>
<span id="cb56-3"><a href="thermal-conversion.html#cb56-3" tabindex="-1"></a><span class="cf">for</span>(x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(therm_dates)){</span>
<span id="cb56-4"><a href="thermal-conversion.html#cb56-4" tabindex="-1"></a>  date_therm <span class="ot">&lt;-</span> therm_dates[x]</span>
<span id="cb56-5"><a href="thermal-conversion.html#cb56-5" tabindex="-1"></a>  <span class="fu">print</span>(date_therm)</span>
<span id="cb56-6"><a href="thermal-conversion.html#cb56-6" tabindex="-1"></a>  </span>
<span id="cb56-7"><a href="thermal-conversion.html#cb56-7" tabindex="-1"></a>  dir <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;I:</span><span class="sc">\\</span><span class="st">PARSER_Ext</span><span class="sc">\\</span><span class="st">Fdc_PR_Canoe</span><span class="sc">\\</span><span class="st">Flights</span><span class="sc">\\</span><span class="st">&quot;</span>,date_therm,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">1_Data</span><span class="sc">\\</span><span class="st">H20T&quot;</span>) <span class="co">#directory to h20T imagery</span></span>
<span id="cb56-8"><a href="thermal-conversion.html#cb56-8" tabindex="-1"></a>  list_dir <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir, <span class="at">full.names =</span> <span class="cn">TRUE</span>,<span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">&quot;DJI.+-H20T&quot;</span>)) <span class="co">#folders containing orignal imagery</span></span>
<span id="cb56-9"><a href="thermal-conversion.html#cb56-9" tabindex="-1"></a>  <span class="fu">print</span>(list_dir)</span>
<span id="cb56-10"><a href="thermal-conversion.html#cb56-10" tabindex="-1"></a>  </span>
<span id="cb56-11"><a href="thermal-conversion.html#cb56-11" tabindex="-1"></a>  <span class="co"># GETTING ALL RGB IMAGES</span></span>
<span id="cb56-12"><a href="thermal-conversion.html#cb56-12" tabindex="-1"></a>  <span class="cf">for</span> (d <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_dir)){</span>
<span id="cb56-13"><a href="thermal-conversion.html#cb56-13" tabindex="-1"></a>    <span class="co">#calling each directly separately</span></span>
<span id="cb56-14"><a href="thermal-conversion.html#cb56-14" tabindex="-1"></a>    folder_dir <span class="ot">&lt;-</span> list_dir[d]</span>
<span id="cb56-15"><a href="thermal-conversion.html#cb56-15" tabindex="-1"></a>    <span class="cf">if</span>(d <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb56-16"><a href="thermal-conversion.html#cb56-16" tabindex="-1"></a>      files_W <span class="ot">&lt;-</span> <span class="fu">list.files</span>(folder_dir, <span class="at">pattern =</span> <span class="st">&quot;_W.JPG$&quot;</span>)</span>
<span id="cb56-17"><a href="thermal-conversion.html#cb56-17" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb56-18"><a href="thermal-conversion.html#cb56-18" tabindex="-1"></a>      files_W_add <span class="ot">&lt;-</span> <span class="fu">list.files</span>(folder_dir, <span class="at">pattern =</span> <span class="st">&quot;_W.JPG$&quot;</span>)</span>
<span id="cb56-19"><a href="thermal-conversion.html#cb56-19" tabindex="-1"></a>      files_W <span class="ot">&lt;-</span> <span class="fu">append</span>(files_W,files_W_add)</span>
<span id="cb56-20"><a href="thermal-conversion.html#cb56-20" tabindex="-1"></a>    }</span>
<span id="cb56-21"><a href="thermal-conversion.html#cb56-21" tabindex="-1"></a>  }</span>
<span id="cb56-22"><a href="thermal-conversion.html#cb56-22" tabindex="-1"></a>  </span>
<span id="cb56-23"><a href="thermal-conversion.html#cb56-23" tabindex="-1"></a>  dir_IR <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;I:</span><span class="sc">\\</span><span class="st">PARSER_Ext</span><span class="sc">\\</span><span class="st">Fdc_PR_Canoe</span><span class="sc">\\</span><span class="st">Flights</span><span class="sc">\\</span><span class="st">&quot;</span>,date_therm,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">1_Data</span><span class="sc">\\</span><span class="st">H20T</span><span class="sc">\\</span><span class="st">Merged_T</span><span class="sc">\\</span><span class="st">Temperature_rasters_EXIF_DST&quot;</span>)</span>
<span id="cb56-24"><a href="thermal-conversion.html#cb56-24" tabindex="-1"></a>  </span>
<span id="cb56-25"><a href="thermal-conversion.html#cb56-25" tabindex="-1"></a>  <span class="co">#list of thermal files</span></span>
<span id="cb56-26"><a href="thermal-conversion.html#cb56-26" tabindex="-1"></a>  files_T <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir_IR, <span class="at">pattern =</span> <span class="st">&quot;_T.tiff$&quot;</span>)</span>
<span id="cb56-27"><a href="thermal-conversion.html#cb56-27" tabindex="-1"></a>  </span>
<span id="cb56-28"><a href="thermal-conversion.html#cb56-28" tabindex="-1"></a>  </span>
<span id="cb56-29"><a href="thermal-conversion.html#cb56-29" tabindex="-1"></a>  <span class="co"># Function to extract the core name from a file path</span></span>
<span id="cb56-30"><a href="thermal-conversion.html#cb56-30" tabindex="-1"></a>  get_core_name <span class="ot">&lt;-</span> <span class="cf">function</span>(file_path) {</span>
<span id="cb56-31"><a href="thermal-conversion.html#cb56-31" tabindex="-1"></a>    <span class="fu">basename</span>(file_path) <span class="sc">%&gt;%</span></span>
<span id="cb56-32"><a href="thermal-conversion.html#cb56-32" tabindex="-1"></a>      <span class="fu">gsub</span>(<span class="st">&quot;_[TW]$&quot;</span>, <span class="st">&quot;&quot;</span>, .)</span>
<span id="cb56-33"><a href="thermal-conversion.html#cb56-33" tabindex="-1"></a>  }</span>
<span id="cb56-34"><a href="thermal-conversion.html#cb56-34" tabindex="-1"></a>  </span>
<span id="cb56-35"><a href="thermal-conversion.html#cb56-35" tabindex="-1"></a>  <span class="co">#creating a new folder for the metahspae test</span></span>
<span id="cb56-36"><a href="thermal-conversion.html#cb56-36" tabindex="-1"></a>  merged <span class="ot">&lt;-</span> <span class="st">&quot;Merged_T&quot;</span></span>
<span id="cb56-37"><a href="thermal-conversion.html#cb56-37" tabindex="-1"></a>  </span>
<span id="cb56-38"><a href="thermal-conversion.html#cb56-38" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">RGB_&amp;_IR_EXIF_DST&quot;</span>))) {</span>
<span id="cb56-39"><a href="thermal-conversion.html#cb56-39" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">RGB_&amp;_IR_EXIF_DST&quot;</span>),<span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-40"><a href="thermal-conversion.html#cb56-40" tabindex="-1"></a>  }</span>
<span id="cb56-41"><a href="thermal-conversion.html#cb56-41" tabindex="-1"></a>  </span>
<span id="cb56-42"><a href="thermal-conversion.html#cb56-42" tabindex="-1"></a>  dir_new <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dir, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>,merged,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">RGB_&amp;_IR_EXIF_DST&quot;</span>)</span>
<span id="cb56-43"><a href="thermal-conversion.html#cb56-43" tabindex="-1"></a>  </span>
<span id="cb56-44"><a href="thermal-conversion.html#cb56-44" tabindex="-1"></a>  <span class="cf">for</span> (d <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list_dir)){</span>
<span id="cb56-45"><a href="thermal-conversion.html#cb56-45" tabindex="-1"></a>    <span class="co">#calling each directly separately</span></span>
<span id="cb56-46"><a href="thermal-conversion.html#cb56-46" tabindex="-1"></a>    <span class="fu">print</span>(d)</span>
<span id="cb56-47"><a href="thermal-conversion.html#cb56-47" tabindex="-1"></a>    folder_dir_W <span class="ot">&lt;-</span> list_dir[d]</span>
<span id="cb56-48"><a href="thermal-conversion.html#cb56-48" tabindex="-1"></a>    files_W <span class="ot">&lt;-</span> <span class="fu">list.files</span>(folder_dir_W, <span class="at">pattern =</span> <span class="st">&quot;_W.JPG$&quot;</span>)</span>
<span id="cb56-49"><a href="thermal-conversion.html#cb56-49" tabindex="-1"></a>    </span>
<span id="cb56-50"><a href="thermal-conversion.html#cb56-50" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(files_T)) {</span>
<span id="cb56-51"><a href="thermal-conversion.html#cb56-51" tabindex="-1"></a>      core_name_T <span class="ot">&lt;-</span> <span class="fu">substr</span>(files_T[i], <span class="dv">1</span>, <span class="fu">nchar</span>(files_T[i]) <span class="sc">-</span> <span class="dv">6</span>)</span>
<span id="cb56-52"><a href="thermal-conversion.html#cb56-52" tabindex="-1"></a>      matching_file_W <span class="ot">&lt;-</span> files_W[<span class="fu">str_detect</span>(files_W, core_name_T)]</span>
<span id="cb56-53"><a href="thermal-conversion.html#cb56-53" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">length</span>(matching_file_W)<span class="sc">&gt;=</span><span class="dv">1</span>){</span>
<span id="cb56-54"><a href="thermal-conversion.html#cb56-54" tabindex="-1"></a>        <span class="co">#copying over files</span></span>
<span id="cb56-55"><a href="thermal-conversion.html#cb56-55" tabindex="-1"></a>        <span class="fu">file.copy</span>(<span class="at">from =</span> <span class="fu">paste0</span>(folder_dir_W,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, matching_file_W),</span>
<span id="cb56-56"><a href="thermal-conversion.html#cb56-56" tabindex="-1"></a>                  <span class="at">to =</span> <span class="fu">paste0</span>(dir_new,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, matching_file_W), <span class="at">overwrite =</span> <span class="cn">FALSE</span>)</span>
<span id="cb56-57"><a href="thermal-conversion.html#cb56-57" tabindex="-1"></a>        <span class="fu">file.copy</span>(<span class="at">from =</span> <span class="fu">paste0</span>(dir_IR,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, files_T[i]),</span>
<span id="cb56-58"><a href="thermal-conversion.html#cb56-58" tabindex="-1"></a>                  <span class="at">to =</span> <span class="fu">paste0</span>(dir_new,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, files_T[i]), <span class="at">overwrite =</span> <span class="cn">FALSE</span>)</span>
<span id="cb56-59"><a href="thermal-conversion.html#cb56-59" tabindex="-1"></a>      }</span>
<span id="cb56-60"><a href="thermal-conversion.html#cb56-60" tabindex="-1"></a>    }</span>
<span id="cb56-61"><a href="thermal-conversion.html#cb56-61" tabindex="-1"></a>  }</span>
<span id="cb56-62"><a href="thermal-conversion.html#cb56-62" tabindex="-1"></a>  </span>
<span id="cb56-63"><a href="thermal-conversion.html#cb56-63" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Note</strong>: We have run across an error in some imagery, DJI is working on a solution.</p>
<p>The error is as follows:
ERROR: call dirp_set_measurement_params failed
ERROR: call prv_isp_config failed
Test done with return code -6</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="micasense-irradiance-correction.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/owaite/GenomeBC_BPG/edit/main/0_Thermal_Conversion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/owaite/GenomeBC_BPG/blob/main/0_Thermal_Conversion.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
